"use strict";(globalThis["webpackChunk_99c_app"]=globalThis["webpackChunk_99c_app"]||[]).push([[485],{2485:(e,s,a)=>{a.r(s),a.d(s,{default:()=>v});var i=a(9835),t=a(6970),l=a(1957);const o={key:0,class:"err-message"},m={class:"file-name"},r={class:"loader"};function n(e,s,a,n,u,d){const c=(0,i.up)("q-icon"),p=(0,i.up)("q-input"),f=(0,i.up)("q-btn"),h=(0,i.up)("q-card-actions"),g=(0,i.up)("q-form"),b=(0,i.up)("q-card-section"),w=(0,i.up)("q-card"),M=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(M,{class:"q-pa-sm flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"card-form"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{class:"q-pa-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{onSubmit:e.submitForm},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{modelValue:e.form.firstName,"onUpdate:modelValue":s[0]||(s[0]=s=>e.form.firstName=s),label:"First Name",dense:"",class:"q-mb-md",required:""},{prepend:(0,i.w5)((()=>[(0,i.Wm)(c,{name:"person"})])),_:1},8,["modelValue"]),(0,i.Wm)(p,{modelValue:e.form.lastName,"onUpdate:modelValue":s[1]||(s[1]=s=>e.form.lastName=s),label:"Last Name",dense:"",class:"q-mb-md",required:""},{prepend:(0,i.w5)((()=>[(0,i.Wm)(c,{name:"person"})])),_:1},8,["modelValue"]),(0,i.Wm)(p,{modelValue:e.form.email,"onUpdate:modelValue":s[2]||(s[2]=s=>e.form.email=s),type:"email",label:"Email Address",dense:"",class:"q-mb-md",required:""},{prepend:(0,i.w5)((()=>[(0,i.Wm)(c,{name:"email"})])),_:1},8,["modelValue"]),e.emailErr?((0,i.wg)(),(0,i.iD)("div",o,(0,t.zw)(e.emailErr),1)):(0,i.kq)("",!0),(0,i._)("input",{type:"file",ref:"fileInput",multiple:"",onChange:s[3]||(s[3]=(...s)=>e.selectFiles&&e.selectFiles(...s))},null,544),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.files,((s,a)=>((0,i.wg)(),(0,i.iD)("div",{key:a,class:"file-item"},[(0,i._)("span",m,(0,t.zw)(s.file),1),(0,i.Wm)(f,{icon:"delete",onClick:s=>e.removeFile(a),flat:"",round:"",dense:"",class:"file-delete-btn"},null,8,["onClick"])])))),128)),(0,i.wy)((0,i._)("div",r,null,512),[[l.F8,e.isLoading]]),e.uploadMsg?((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,t.C_)({"success-msg":e.isSuccessMsg(),"err-msg":e.isErrorMsg()})},(0,t.zw)(e.uploadMsg),3)):(0,i.kq)("",!0),(0,i.Wm)(h,{align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{type:"submit",label:"Submit",color:e.submitButtonColor,disabled:!e.isFormValid,class:(0,t.C_)(e.submitButtonClass),animate:e.submitButtonAnimation,onMouseover:s[4]||(s[4]=s=>e.submitButtonColor="primary"),onMouseout:s[5]||(s[5]=s=>e.submitButtonColor="primary")},null,8,["color","disabled","class","animate"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})}a(9665);var u=a(1569);const d=(0,i.aZ)({name:"IndexPage",data(){return{form:{firstName:"",lastName:"",email:""},files:[],emailErr:"",uploadMsg:"",isLoading:!1,submitButtonColor:"primary",submitButtonAnimation:"pulse"}},watch:{"form.email"(e){let s=this.isEmailValid(e);this.emailErr=!s&&"Provide a valid email address"}},computed:{isFormValid(){return this.form.firstName.trim().length>0&&this.form.lastName.trim().length>0&&this.form.email.trim().length>0}},methods:{submitForm(){if(this.files.length<=0)this.uploadMsg="Atleast one file is required to submit";else{const e=new FormData;e.append("firstName",this.form.firstName),e.append("lastName",this.form.lastName),e.append("email",this.form.email),this.isLoading=!0,u.api.post("/api/entry",e,{headers:{"Content-Type":"application/json"}}).then((e=>{200===e.status&&setTimeout((()=>{this.isLoading=!1,200===e.status?(this.uploadMsg="form has been successfully submited",this.$router.push("/thank-you")):this.uploadMsg="Error while submitting form",setTimeout((()=>{this.uploadMsg=""}),2e3)}),2e3)})).catch((e=>{console.error(e)}))}},async selectFiles(e){const s=Array.from(e.target.files);s.forEach((async e=>{this.isLoading=!0,this.uploadMsg="";const s=await this.$store.dispatch("uploadFile",e);s&&this.files.push({file:e.name,uploading:!0,success:!1}),setTimeout((()=>{this.isLoading=!1,this.uploadMsg=s?`${e.name} has been successfully uploaded`:`${e.name} is not a valid format`,setTimeout((()=>{this.uploadMsg=""}),2e3)}),2e3)}))},removeFile(e){this.files.splice(e,1),this.files.length&&(this.files=null)},isEmailValid(e){const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return s.test(e)},isSuccessMsg(){return this.uploadMsg&&this.uploadMsg.includes("successfully")},isErrorMsg(){return this.uploadMsg&&!this.isSuccessMsg()}},components:{}});var c=a(1639),p=a(9885),f=a(4458),h=a(3190),g=a(8326),b=a(4925),w=a(2857),M=a(5157),q=a(1821),y=a(9984),_=a.n(y);const C=(0,c.Z)(d,[["render",n],["__scopeId","data-v-247d0b08"]]),v=C;_()(d,"components",{QPage:p.Z,QCard:f.Z,QCardSection:h.Z,QForm:g.Z,QInput:b.Z,QIcon:w.Z,QBtn:M.Z,QCardActions:q.Z})}}]);